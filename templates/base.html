<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}–¢–µ—Å—Ç –ï–Ω–µ–∞–≥—Ä–∞–º–∏{% endblock %}</title>
    <link rel="icon" type="image/png" href="/static/img/eneagram_logo.png" />
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container nav-inner">
            <div class="nav-brand">
                <h2>üîÆ –ï–Ω–µ–∞–≥—Ä–∞–º–∞</h2>
            </div>

            <!-- –ö–Ω–æ–ø–∫–∞ –±—É—Ä–≥–µ—Ä-–º–µ–Ω—é –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö -->
            <button class="nav-toggle" id="navToggle" aria-label="–ú–µ–Ω—é" aria-expanded="false">
                <span></span>
            </button>

            <!-- –û–¥–∏–Ω –±–ª–æ–∫ nav-links -->
            <div class="nav-links" id="navLinks">
                <a href="/home">–ì–æ–ª–æ–≤–Ω–∞</a>
                <a href="/info">–ü—Ä–æ —Ç–µ—Å—Ç</a>
                <a href="/payment" class="nav-icon" title="–û–ø–ª–∞—Ç–∞">
                    <span style="font-size: 1.1em">üí≥</span> –û–ø–ª–∞—Ç–∞
                </a>
                <a href="/test" id="navTest" style="display:none;">–¢–µ—Å—Ç</a>
                <a href="/result" id="navResult" style="display:none;">–†–µ–∑—É–ª—å—Ç–∞—Ç–∏</a>
                <a href="/videos" id="navVideos" style="display:none;">üé• –í—ñ–¥–µ–æ</a>
            </div>
        </div>
    </nav>

    {% block content %}{% endblock %}

    <footer>
        <p>&copy; 2025 –¢–µ—Å—Ç –ï–Ω–µ–∞–≥—Ä–∞–º–∏. –°–∏—Å—Ç–µ–º–∞ 9 —Ç–∏–ø—ñ–≤ –æ—Å–æ–±–∏—Å—Ç–æ—Å—Ç—ñ.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // –ü–æ–∫–∞–∑/–ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø—É–Ω–∫—Ç—ñ–≤ –¢–µ—Å—Ç/–†–µ–∑—É–ª—å—Ç–∞—Ç–∏
        const sessionId = localStorage.getItem('enneagram_session');
        const navTest   = document.getElementById('navTest');
        const navResult = document.getElementById('navResult');

        if (navTest) {
            navTest.style.display = sessionId ? 'inline-flex' : 'none';
        }
        if (navResult) {
            navResult.style.display = sessionId ? 'inline-flex' : 'none';
        }

        // –ë—É—Ä–≥–µ—Ä-–º–µ–Ω—é
        const navToggle = document.getElementById('navToggle');
        const navLinks  = document.getElementById('navLinks');

        if (navToggle && navLinks) {
            navToggle.addEventListener('click', () => {
                const isOpen = navLinks.classList.toggle('open');
                navToggle.classList.toggle('open', isOpen);
                navToggle.setAttribute('aria-expanded', isOpen ? 'true' : 'false');
            });
        }

        // –ü—ñ–¥–≥–æ–Ω–∫–∞ —Ç–µ–∫—Å—Ç—É –Ω–∞ –∑–≤–æ—Ä–æ—Ç—ñ flip-–∫–∞—Ä—Ç–æ–∫
        function fitTextInElement(el, minSize = 10, maxSize = 24) {
            let size = maxSize;
            el.style.fontSize = size + 'px';
            const parent = el.parentElement;

            while ((el.scrollHeight > parent.clientHeight || el.scrollWidth > parent.clientWidth) && size > minSize) {
                size -= 1;
                el.style.fontSize = size + 'px';
            }
        }

        const textsBack = document.querySelectorAll('.flip-card .flip-back p');
        textsBack.forEach(el => fitTextInElement(el, 10, 32));
    });
    </script>

    <!-- –ü–æ–∫–∞–∑ –≤–∫–ª–∞–¥–∫–∏ –í—ñ–¥–µ–æ –ø—ñ—Å–ª—è –æ–ø–ª–∞—Ç–∏ -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const paymentStatus = localStorage.getItem('paymentstatus');  // —Ç–æ–π —Å–∞–º–∏–π –∫–ª—é—á, —â–æ –π —É payment.html

        if (paymentStatus === 'paid') {
            const videoNav = document.getElementById('navVideos');
            if (videoNav) {
                videoNav.style.display = 'inline-flex';
            }
        }
    });
    </script>

</body>
</html>
